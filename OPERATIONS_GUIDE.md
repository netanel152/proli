# מדריך תפעול ותקלות - Fixi

## ארכיטקטורת ריצה

המערכת רצה בשני תהליכים נפרדים (Processes):

1. **שרת ה-Backend (`uvicorn`):** אחראי על קבלת Webhooks מוואטסאפ, הרצת ה-AI וניהול התזמון.
2. **ממשק הניהול (`streamlit`):** דשבורד ויזואלי למנהל המערכת.

## פתרון תקלות נפוצות

### 1. הבוט לא עונה להודעות

- **בדיקה:** האם השרת `uvicorn` רץ?
- **בדיקה:** האם ה-Webhook ב-Green API מוגדר לכתובת ה-Ngrok/Server הנוכחית?
- **לוגים:** חפש ב-`logs/fixi.log` שגיאות מסוג `AI Rate Limit` (נגמרה המכסה) או `Connection Error`.

### 2. שגיאות התחברות ל-DB

- המערכת משתמשת ב-`certifi` כדי למנוע שגיאות SSL. וודא שהקובץ `database.py` מכיל `tlsCAFile=certifi.where()`.
- וודא שכתובת ה-IP של השרת מורשית ב-MongoDB Atlas (Network Access).

### 3. הלידים לא מופיעים בדשבורד

- נסה ללחוץ על כפתור "Refresh Leads" בצד ימין למעלה.
- וודא שאתה מחובר ל-Database הנכון (Production vs Test).

## ניהול גרסאות

- **הוספת איש מקצוע:** מתבצעת דרך האדמין או ע"י הרצת `python scripts/seed_db.py` (זהירות: הסקריפט מוחק נתונים קיימים!).
- **ניקוי נתונים:** הרצת `python scripts/clear_history.py` תמחק את כל ההודעות והלידים אך תשאיר את המשתמשים.
